/* Kreiranje tablice VEZNA1 s dodanim constraint-ovima i ON DELETE NO ACTION */
CREATE TABLE VEZNA1 (
    TABID INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY 
        (START WITH 1, INCREMENT BY 1 NO MAXVALUE ORDER), /* TABID - ID veze */
    TABIDAUT INTEGER NOT NULL, /* TABIDAUT - ID autora (strani kljuè) */
    TABIDKNJ INTEGER NOT NULL, /* TABIDKNJ - ID knjige (strani kljuè) */
    
    /* Definiranje primarnog kljuèa s imenom */
    CONSTRAINT PK_VEZNA1 PRIMARY KEY (TABID), 

    /* Definiranje stranog kljuèa za autore s ON DELETE NO ACTION */
    CONSTRAINT FK_VEZNA1_AUT FOREIGN KEY (TABIDAUT) 
        REFERENCES AUTORI(TABID) 
        ON DELETE NO ACTION, /* Ako postoji veza, autor se ne mo¾e obrisati */

    /* Definiranje stranog kljuèa za knjige s ON DELETE NO ACTION */
    CONSTRAINT FK_VEZNA1_KNJ FOREIGN KEY (TABIDKNJ) 
        REFERENCES KNJIGE(TABID) 
        ON DELETE NO ACTION /* Ako postoji veza, knjiga se ne mo¾e obrisati */
);

/* Kreiranje jedinstvenog indeksa za kolonu TABID */
CREATE UNIQUE INDEX IDX_UNIQUE_VEZNA1_ID
ON VEZNA1 (TABID);

/* Kreiranje view-a za tablicu VEZNA1 s originalnim nazivima kolona */
CREATE VIEW VIEW_VEZNA1 AS
    SELECT 
        TABID AS ID, /* ID veze */
        TABIDAUT AS IDAUT, /* ID autora */
        TABIDKNJ AS IDKNJ /* ID knjige */
 FROM VEZNA1;
 
/* Dodavanje komentara na stupce */
COMMENT ON COLUMN VEZNA1.TABID 
    IS 'TABID - ID veze';

COMMENT ON COLUMN VEZNA1.TABIDAUT 
    IS 'TABIDAUT - ID autora';

COMMENT ON COLUMN VEZNA1.TABIDKNJ 
    IS 'TABIDKNJ - ID knjige';
